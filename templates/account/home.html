
{% extends 'account/main.html' %}

{% block content %}
<div class="all-blogs">
    {% if request.user.is_authenticated %}
        <div class="welcome-text">
            <h2>Welcome {{request.user.username}}!</h2>
        </div>
    {% else %}
    <div class="empty"></div>
    {% endif %}
    <div class="blogs-links">
        <div class="all-blogs-link">
            <a href="{% url 'all_blogposts' %}" title="See all blog posts"><h2><i class="fa-solid fa-angles-right"></i> All Blog-Posts  <i class="fa-solid fa-blog"></i></h2></a>
        </div>
        <div class="all-blogs-link">
            <a href="{% url 'all_questions' %}" title="See all questions"><h2><i class="fa-solid fa-angles-right"></i> All Questions <i class="fa-solid fa-circle-question"></i></h2></a>
        </div>
    </div>
</div>
    {% if request.user.is_authenticated %}
        <div class="all-blogposts-container">
            <div class="blogpost-start">
                <div class="blogs-text"><h2>Your Posts</h2></div>
                    {% if request.user|isStudent %}
                        <div class="student-new-blog">
                            <a href="{% url 'student-new-blogpost' %}"><h2>New BlogPost +</h2></a>
                        </div>
                    {% endif %}
                
                    {% if request.user|isCoordinator %}
                        <div class="coordinator-new-blog">
                            <a href="{% url 'coordinator-new-blogpost' %}"><h2>New BlogPost +</h2></a>
                        </div>
                    {% endif %}
            </div>
            {% for blogpost in user_blogposts %}
                {% if blogpost.user|isStudent %}
                <div class="blogpost-container">
                    <div class="blogpost-header">
                        <div class="blogost-title-header">
                            <div class="blogpost-title"><h1>{{ blogpost.title }}</h1></div>
                        </div>
                        <div class="blogpost-time"><i>{{ blogpost.updated_time }}</i></div>
                    </div>
                    <div class="blogpost-body">
                        <div class="blogpost-content"><p>{{ blogpost.content }}</p></div>
                    </div>
                    <div class="blogpost-footer">
                        <div class="blogpost-ud">
                            {% if request.user|isStudent %}
                            <div class="blogpost-edit">
                                <a href="{% url 'blogpost-edit-student' blogpost.id %}" title="Edit post"><h3>Edit <i class="fa-solid fa-pen-to-square"></i></h3></a>
                            </div>
                            {% endif %}
                            {% if request.user|isCoordinator %}
                            <div class="blogpost-edit">
                                <a href="{% url 'blogpost-edit-coordinator' blogpost.id %}" title="Edit post"><h3>Edit <i class="fa-solid fa-pen-to-square"></i></h3></a>
                            </div>
                            {% endif %}
                            <div class="blogpost-delete">
                                <a href="{% url 'delete-blogpost' blogpost.id %}" title="Delete post" onclick="return confirm('Are you sure you want to delete this blog?');"><h3>Delete <i class="fa-solid fa-trash-can"></i></h3></a>
                            </div>
                        </div>
                        
                        <div class="blogpost-votes">
                            <div class="blogpost-upvotes">
                                <div class="blogpost-upvotes-text">
                                    <h4>Upvotes</h4>
                                </div>
                                <div class="blogpost-upvote-count">{{ blogpost.upvotes }}</div>
                            </div>
                            <div class="blogpost-downvotes">
                                <div class="blogpost-downvotes-text">
                                    <h4>Downvotes</h4>
                                </div>
                                <div class="blogpost-downvote-count">{{ blogpost.downvotes }}</div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% if blogpost.user|isCoordinator %}
                <div class="blogpost-container coordinator">
                    <div class="blogpost-header">
                        <div class="blogost-title-header">
                            <div class="blogpost-title"><h1>{{ blogpost.title }}</h1></div>
                            {% if blogpost.importance == 'High' %}
                            <div class="blogpost-importance" title="High Importance Post"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i></div>
                            {% endif %}
                            {% if blogpost.importance == 'Medium' %}
                            <div class="blogpost-importance" title="Medium Importance Post"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-regular fa-star"></i></div>
                            {% endif %}
                            {% if blogpost.importance == 'Low' %}
                            <div class="blogpost-importance" title="Low Importance Post"><i class="fa-solid fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i></div>
                            {% endif %}
                        </div>
                        <div class="blogpost-time"><i>{{ blogpost.updated_time }}</i></div>
                    </div>
                    <div class="blogpost-body">
                        <div class="blogpost-content"><p>{{ blogpost.content }}</p></div>
                    </div>
                    <div class="blogpost-footer">
                        <div class="blogpost-ud">
                            {% if request.user|isStudent %}
                            <div class="blogpost-edit">
                                <a href="{% url 'blogpost-edit-student' blogpost.id %}" title="Edit post"><h3>Edit <i class="fa-solid fa-pen-to-square"></i></h3></a>
                            </div>
                            {% endif %}
                            {% if request.user|isCoordinator %}
                            <div class="blogpost-edit">
                                <a href="{% url 'blogpost-edit-coordinator' blogpost.id %}" title="Edit post"><h3>Edit <i class="fa-solid fa-pen-to-square"></i></h3></a>
                            </div>
                            {% endif %}
                            <div class="blogpost-delete">
                                <a href="{% url 'delete-blogpost' blogpost.id %}" title="Delete post" onclick="return confirm('Are you sure you want to delete this blog?');"><h3>Delete <i class="fa-solid fa-trash-can"></i></h3></a>
                            </div>
                        </div>
                        
                        <div class="blogpost-votes">
                            <div class="blogpost-upvotes">
                                <div class="blogpost-upvotes-text">
                                    <h4>Upvotes</h4>
                                </div>
                                <div class="blogpost-upvote-count">{{ blogpost.upvotes }}</div>
                            </div>
                            <div class="blogpost-downvotes">
                                <div class="blogpost-downvotes-text">
                                    <h4>Downvotes</h4>
                                </div>
                                <div class="blogpost-downvote-count">{{ blogpost.downvotes }}</div>
                            </div>
                        </div>
                    </div>
                </div>


                {% endif %}
            {% endfor %}
        </div>

    {% endif %}
{% endblock %}
